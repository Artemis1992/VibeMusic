<!--profile.html-->
{% extends 'vibemusic/base.html' %}
{% load static crispy_forms_tags %}

{% block content %}
<div class="container mt-5">
    <div class="row">
        <div class="col-md-8 offset-md-2">
            <h2>Профиль: {{ user_profile.username }}</h2>
            <img src="{% if user_profile.profile.photo %}{{ user_profile.profile.photo.url }}{% else %}{% static 'vibemusic/images/placeholder.jpg' %}{% endif %}" 
                 alt="Аватар" class="rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
            
            {% if user_profile.profile.telegram_username %}
                <p class="text-muted">Telegram: @{{ user_profile.profile.telegram_username }}</p>
            {% endif %}

            <h3 class="mt-4">Активности</h3>
            {% if activities %}
                <ul class="list-unstyled">
                    {% for activity in activities %}
                        <li>{{ activity.message }} <small class="text-muted">({{ activity.created_at|date:"d.m.Y H:i" }})</small></li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted">Нет активности.</p>
            {% endif %}

            <h3 class="mt-4">Подписки</h3>
            {% if following %}
                <ul class="list-unstyled">
                    {% for follow in following %}
                        <li><a href="{% url 'vibemusic:profile' follow.user.id %}">{{ follow.user.username }}</a></li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted">Нет подписок.</p>
            {% endif %}

            <h3 class="mt-4">Посты</h3>
            {% if user_posts %}
                <ul class="list-unstyled">
                    {% for post in user_posts %}
                        <li><a href="{% url 'vibemusic:post_detail' post.slug %}">{{ post.title }}</a></li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted">Нет постов.</p>
            {% endif %}
            <a href="{% url 'vibemusic:add_post' %}" class="btn btn-primary mt-3">Добавить пост</a>
        </div>
    </div>
</div>
{% endblock %}